webpackJsonp(["app/js/course/thread-show/index"],{eb8f89cfd4f6572009d6:function(t,e,a){"use strict";var o=CKEDITOR.replace("post_content",{toolbar:"Thread",fileSingleSizeLimit:app.fileSingleSizeLimit,filebrowserImageUploadUrl:$("#post_content").data("imageUploadUrl")});o.on("change",function(){$("#post_content").val(o.getData())}),o.on("blur",function(){$("#post_content").val(o.getData())});var r=$("#thread-post-form"),n=r.validate({rules:{"post[content]":{required:!0}}});$(".js-btn-thread-post-form-save").click(function(){if(n.form()){$(".js-btn-thread-post-form-save").button("loading"),$(".thread-post-list").find("li.empty").remove();var t=$("#thread-post-form");$.ajax({url:t.attr("action"),type:"post",data:t.serialize(),success:function(e){$(".js-btn-thread-post-form-save").button("reset"),$("#thread-post-num").text(parseInt($("#thread-post-num").text())+1);var a=$(e).appendTo(".thread-post-list").attr("id");o.setData(""),$(".js-attachment-list").empty(),$(".js-attachment-ids").val(""),$(".js-upload-file").show(),t.find("[type=submit]").removeAttr("disabled"),window.location.href="#"+a},error:function(t){$(".js-btn-thread-post-form-save").button("reset"),t=$.parseJSON(t.responseText),t.error?Notify.danger(t.error.message):Notify.danger(Translator.trans("course.thread_replay_failed_hint"))}})}}),$("[data-role=confirm-btn]").click(function(){var t=$(this);if(!confirm(t.data("confirmMessage")))return!1;$.post(t.data("url"),function(){var e=t.data("afterUrl");e?window.location.href=e:window.location.reload()})}),$(".thread-post-list").on("click",".thread-post-action",function(){var t=$(this).data("user");o.focus(),o.insertHtml("@"+t+"&nbsp;")}),$(".thread-post-list").on("click","[data-action=post-delete]",function(){if(!confirm(Translator.trans("course.thread_delete_hint")))return!1;var t=$(this);$.post(t.data("url"),function(){window.location.reload()})})}},["eb8f89cfd4f6572009d6"]);