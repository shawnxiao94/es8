webpackJsonp(["app/js/course/thread-show/index"],[function(t,a){"use strict";var e=CKEDITOR.replace("post_content",{toolbar:"Thread",filebrowserImageUploadUrl:$("#post_content").data("imageUploadUrl")});e.on("change",function(){$("#post_content").val(e.getData())}),e.on("blur",function(){$("#post_content").val(e.getData())});var o=$("#thread-post-form"),r=o.validate({rules:{"post[content]":{required:!0}}});$(".js-btn-thread-post-form-save").click(function(){if(r.form()){$(".js-btn-thread-post-form-save").button("loading"),$(".thread-post-list").find("li.empty").remove();var t=$("#thread-post-form");$.ajax({url:t.attr("action"),type:"post",data:t.serialize(),success:function(a){$(".js-btn-thread-post-form-save").button("reset"),$("#thread-post-num").text(parseInt($("#thread-post-num").text())+1);var o=$(a).appendTo(".thread-post-list").attr("id");e.setData(""),$(".js-attachment-list").empty(),$(".js-attachment-ids").val(""),$(".js-upload-file").removeClass("hidden"),t.find("[type=submit]").removeAttr("disabled"),window.location.href="#"+o},error:function(t){$(".js-btn-thread-post-form-save").button("reset"),t=$.parseJSON(t.responseText),t.error?Notify.danger(t.error.message):Notify.danger(Translator.trans("course.thread_replay_failed_hint"))}})}}),$("[data-role=confirm-btn]").click(function(){var t=$(this);return!!confirm(t.data("confirmMessage"))&&void $.post(t.data("url"),function(){var a=t.data("afterUrl");a?window.location.href=a:window.location.reload()})}),$(".thread-post-list").on("click",".thread-post-action",function(){var t=$(this).data("user");e.focus(),e.insertHtml("@"+t+"&nbsp;")}),$(".thread-post-list").on("click","[data-action=post-delete]",function(){if(!confirm(Translator.trans("course.thread_delete_hint")))return!1;var t=$(this);$.post(t.data("url"),function(){window.location.reload()})})}]);