webpackJsonp(["app/js/course-chapter-manage/index"],{0:function(e,t){e.exports=jQuery},"13b789154dc03b9f8710":function(e,t,a){"use strict";var s=a("b334fd7e4c5a19234db2"),n=function(e){return e&&e.__esModule?e:{default:e}}(s);$("#chapter-title-field").on("keypress",function(e){13===(e.keyCode||e.which)&&e.preventDefault()});var r=function(e){var t=e.sortable("serialize").get(),a=0,s=0,n=0;e.find(".task-manage-unit, .task-manage-chapter").each(function(){var e=$(this);e.hasClass("item-lesson")?(a++,e.find(".number").text(a)):e.hasClass("task-manage-unit")?(n++,e.find(".number").text(n)):e.hasClass("task-manage-chapter")&&(s++,n=0,e.find(".number").text(s))}),$.post(e.data("sortUrl"),{ids:t},function(e){})};$("#course-chapter-btn").on("click",function(){var e=$(this),t=$("#course-chapter-form");t.validate({rules:{title:"required"},ajax:!0,currentDom:e,submitSuccess:function(a){e.closest(".modal").modal("hide"),$(".js-task-empty").hasClass("hidden")||$(".js-task-empty").addClass("hidden");var s=$("#"+$(a).attr("id"));if(s.length)s.replaceWith(a),(0,n.default)("success",Translator.trans("site.save_success_hint"));else{var i=$("#"+t.data("parentid"));if(i.length){var c=0;i.nextAll().each(function(){if($(this).hasClass("task-manage-chapter"))return $(this).before(a),c=1,!1}),1!=c&&$("#sortable-list").append(a)}else $("#sortable-list").append(a);var l=$("#sortable-list");r(l)}}})})}},["13b789154dc03b9f8710"]);