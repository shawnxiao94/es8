webpackJsonp(["app/js/auth/register/index"],{"6386db75dd507093b6de":function(e,a,t){"use strict";var i=t("9ffde76f31e1d8ca79f0");new(function(e){return e&&e.__esModule?e:{default:e}}(i).default)},"9ffde76f31e1d8ca79f0":function(e,a,t){"use strict";function i(e,a){if(!(e instanceof a))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(a,"__esModule",{value:!0});var n=function(){function e(e,a){for(var t=0;t<a.length;t++){var i=a[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(a,t,i){return t&&e(a.prototype,t),i&&e(a,i),a}}(),s=function(){function e(){i(this,e),this.initDate(),this.initValidator(),this.inEventMobile(),this.initCaptchaCode(),this.initRegisterTypeRule(),this.initInviteCodeRule(),this.intiUserTermsRule()}return n(e,[{key:"initValidator",value:function(){$("#register-form").validate({rules:{nickname:{required:!0,byte_minlength:4,byte_maxlength:18,nickname:!0,chinese_alphanumeric:!0,es_remote:{type:"get"}},password:{minlength:5,maxlength:20}}});$.validator.addMethod("email_or_mobile_check",function(e,a,t){var i=/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/,n=/^1\d{10}$/,s=!1,r=i.test(e),l=n.test(e);return l?($(".email_mobile_msg").removeClass("hidden"),$(".js-captcha").addClass("hidden")):($(".email_mobile_msg").addClass("hidden"),$(".js-captcha").removeClass("hidden")),(r||l)&&(s=!0),$.validator.messages.email_or_mobile_check=Translator.trans("请输入正确的手机／邮箱"),this.optional(a)||s},Translator.trans("validate.email_or_mobile_check.message"))}},{key:"inEventMobile",value:function(){var e=this;$("#register_emailOrMobile").blur(function(){var a=$("#register_emailOrMobile").val();e.emSmsCodeValidate(a)}),$("#register_mobile").blur(function(){var a=$("#register_mobile").val();e.emSmsCodeValidate(a)})}},{key:"initDate",value:function(){$(".date").datetimepicker({autoclose:!0,format:"yyyy-mm-dd",minView:"month",language:document.documentElement.lang})}},{key:"initCaptchaCode",value:function(){var e=$("#getcode_num");e.length>0&&(e.click(function(){$(this).attr("src",e.data("url")+"?"+Math.random())}),this.initCaptchaCodeRule())}},{key:"initRegisterTypeRule",value:function(){var e=$('input[name="email"]');e.length>0&&e.rules("add",{required:!0,email:!0,es_remote:{type:"get"},messages:{required:Translator.trans("validate.valid_email_input.message")}});var a=$('input[name="emailOrMobile"]');a.length>0&&a.rules("add",{required:!0,email_or_mobile_check:!0,es_remote:{type:"get",callback:function(e){e?$(".js-sms-send").removeClass("disabled"):$(".js-sms-send").addClass("disabled")}},messages:{required:Translator.trans("validate.phone_and_email_input.message")}});var t=$('input[name="verifiedMobile"]');t.length>0&&($(".email_mobile_msg").removeClass("hidden"),t.rules("add",{required:!0,phone:!0,es_remote:{type:"get",callback:function(e){e?$(".js-sms-send").removeClass("disabled"):$(".js-sms-send").addClass("disabled")}},messages:{required:Translator.trans("validate.phone.message")}}))}},{key:"initInviteCodeRule",value:function(){var e=$(".invitecode");e.length>0&&e.rules("add",{required:!1,reg_inviteCode:!0,es_remote:{type:"get"}})}},{key:"intiUserTermsRule",value:function(){$("#user_terms").length&&$("#user_terms").rules("add",{required:!0,messages:{required:Translator.trans("validate.user_terms.message")}})}},{key:"initCaptchaCodeRule",value:function(){$('[name="captcha_code"]').rules("add",{required:!0,alphanumeric:!0,es_remote:{type:"get",callback:function(e){e||$("#getcode_num").attr("src",$("#getcode_num").data("url")+"?"+Math.random())}}})}},{key:"initSmsCodeRule",value:function(){$('[name="sms_code"]').rules("add",{required:!0,rangelength:[6,6],es_remote:{type:"get"},messages:{rangelength:Translator.trans("validate.sms_code.message")}})}},{key:"emSmsCodeValidate",value:function(e){/^1\d{10}$/.test(e)?(this.initSmsCodeRule(),$('[name="captcha_code"]').rules("remove")):(this.initCaptchaCodeRule(),$('[name="sms_code"]').rules("remove"))}}]),e}();a.default=s}},["6386db75dd507093b6de"]);