webpackJsonp(["app/js/open-course-manage/replay-lesson/index"],{0:function(e,n){e.exports=jQuery},efb8be413205284ff940:function(e,n,t){"use strict";function s(e){return e&&e.__esModule?e:{default:e}}var a=t("8f840897d9471c8c1fbd"),o=s(a),r=t("b334fd7e4c5a19234db2"),i=s(r),l=function(e,n){$.post(n.data("sortUrl"),{ids:e},function(e){var t=chapterNum=unitNum=0;n.find(".item-lesson, .item-chapter").each(function(){var e=$(this);e.hasClass("item-lesson")?(t++,e.find(".number").text(t)):e.hasClass("item-chapter-unit")?(unitNum++,e.find(".number").text(unitNum)):e.hasClass("item-chapter")&&(chapterNum++,unitNum=0,e.find(".number").text(chapterNum))})})},d=$("#course-item-list");(0,o.default)({element:"#course-item-list",itemSelector:".item-lesson, .item-chapter"},function(e){l(e,d)}),d.on("click",".delete-lesson-btn",function(e){if(confirm(Translator.trans("confirm.delete_lesson.message"))){var n=$(e.currentTarget),t=function(){return n.parents(".item-chapter")[0]},s=function(){t()?n.parents(".item-chapter").remove():n.parents(".item-lesson").remove()};$.post($(this).data("url"),function(e){s(),l(d),(0,i.default)("success",Translator.trans("notify.lesson_deleted.message"))},"json")}}),d.on("click",".delete-chapter-btn",function(e){var n=$(this).data("chapter"),t=$(this).data("part");if(confirm(Translator.trans("confirm.delete_chapter.message",{chapter_name:n,part_name:t}))){var s=$(e.currentTarget);$.post($(this).data("url"),function(e){s.parents(".item-chapter").remove(),l(d),(0,i.default)("success"+n+t+Translator.trans("notify.chapter_deleted.message"))},"json")}}),d.on("click",".replay-lesson-btn",function(e){confirm(Translator.trans("confirm.replay_lesson.message"))&&$.post($(this).data("url"),function(e){if(e.error)10019==e.code?(0,i.default)("danger",Translator.trans("notify.not_record.message")):1403==e.code?(0,i.default)("danger",Translator.trans("notify.no_replay_file.message")):(0,i.default)("danger",Translator.trans("notify.record_error.message"));else{var n="#"+$(e).attr("id");$(n).replaceWith(e),(0,i.default)("success",Translator.trans("notify.lesson_recorded.message"))}})}),d.on("click",".publish-lesson-btn",function(e){$(e.currentTarget);$.post($(this).data("url"),function(e){var n="#"+$(e).attr("id");$(n).find(".item-content .unpublish-warning").remove(),$(n).find(".item-actions .publish-lesson-btn").parent().addClass("hidden").removeClass("show"),$(n).find(".item-actions .unpublish-lesson-btn").parent().addClass("show").removeClass("hidden"),$(n).find(".item-actions .delete-lesson-btn").parent().addClass("hidden").removeClass("show"),$(n).find(".btn-link").tooltip(),(0,i.default)("success",Translator.trans("notify.lesson_publish_success.message"))})}),d.on("click",".unpublish-lesson-btn",function(e){$(e.currentTarget);$.post($(this).data("url"),function(e){var n="#"+$(e).attr("id");0==$(n).find(".item-content").find(".unpublish-warning").length&&($(n).find(".item-content").append('<span class="unpublish-warning text-warning">('+Translator.trans("未发布")+")</span>"),$(n).find(".item-actions .publish-lesson-btn").parent().addClass("show").removeClass("hidden"),$(n).find(".item-actions .unpublish-lesson-btn").parent().addClass("hidden").removeClass("show"),$(n).find(".item-actions .delete-lesson-btn").parent().addClass("show").removeClass("hidden"),$(n).find(".btn-link").tooltip(),(0,i.default)("success",Translator.trans("notify.lesson_publish_cancel.message")))})}),d.on("click",".delete-exercise-btn",function(e){if(confirm(Translator.trans("confirm.delete_lesson_exercise.message"))){$(e.currentTarget);$.post($(this).data("url"),function(e){(0,i.default)("success",Translator.trans("notify.lesson_exercise_deleted.message")),window.location.reload()},"json")}}),d.on("click",".delete-homework-btn",function(e){if(confirm(Translator.trans("confirm.delete_lesson_homework.message"))){$(e.currentTarget);$.post($(this).data("url"),function(e){(0,i.default)("success",Translator.trans("notify.lesson_homework_deleted.message")),window.location.reload()},"json")}}),$("#course-item-list .item-actions .btn-link").tooltip(),$("#course-item-list .fileDeletedLesson").tooltip(),$(".dropdown-menu").parent().on("shown.bs.dropdown",function(){"block"==$(this).find(".dropdown-menu-more").css("display")?($(this).parent().find(".dropdown-menu-more").mouseout(function(){$(this).parent().find(".dropdown-menu-more").hide()}),$(this).parent().find(".dropdown-menu-more").mouseover(function(){$(this).parent().find(".dropdown-menu-more").show()})):$(this).parent().find(".dropdown-menu-more").show()}),$(".dropdown-menu").parent().on("hide.bs.dropdown",function(){$(this).find(".dropdown-menu-more").show()}),function(){var e=$(".lesson-manage-panel").data("file-status-url");$.get(e,"",function(e){if(e&&0!=e.length)for(var n=0;n<e.length;n++){var t=e[n];"waiting"==t.convertStatus||"doing"==t.convertStatus?$("li[data-file-id="+t.id+"]").find('span[data-role="mediaStatus"]').append("<span class='text-warning'>"+Translator.trans("page.file_converting.message")+"</span>"):"error"==t.convertStatus?$("li[data-file-id="+t.id+"]").find('span[data-role="mediaStatus"]').append("<span class='text-danger'>"+Translator.trans("page.file_convert_failed.message")+"</span>"):"success"==t.convertStatus&&($("li[data-file-id="+t.id+"]").find(".mark-manage").show(),$("li[data-file-id="+t.id+"]").find(".mark-manage-divider").show())}})}(),$(".js-lesson-batch-btn-popover").popover({html:!0,trigger:"hover",delay:{show:200,hide:1e3},placement:"top",template:'<div class="popover tata-popover tata-popover-lg" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>',content:function(){return $(this).find(".popover-content").html()}})}},["efb8be413205284ff940"]);